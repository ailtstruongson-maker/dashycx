
<script lang="ts">
  import { processedData } from '../../stores/dashboardStore';
  import { formatCurrency, formatNumber } from '../../utils/formatters';

  $: employees = $processedData?.employeeData.fullSellerArray || [];
</script>

<div class="overflow-x-auto custom-scrollbar">
  <table class="w-full text-left border-separate border-spacing-y-2">
    <thead>
      <tr class="text-slate-400 text-[10px] font-black uppercase tracking-widest">
        <th class="px-4 py-2">Nhân viên</th>
        <th class="px-4 py-2 text-center">Tỷ lệ BH</th>
        <th class="px-4 py-2 text-center">SL Sim</th>
        <th class="px-4 py-2 text-center">Đồng hồ</th>
        <th class="px-4 py-2 text-right">DT Phụ kiện</th>
        <th class="px-4 py-2 text-right">DT Gia dụng</th>
      </tr>
    </thead>
    <tbody>
      {#each employees as emp}
        <tr class="bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors shadow-sm">
          <td class="px-4 py-3 rounded-l-xl">
            <span class="font-black text-slate-800 dark:text-slate-200 text-sm">
              {emp.name.split(' - ')[1] || emp.name}
            </span>
          </td>
          <td class="px-4 py-3 text-center">
            <span class="px-2 py-1 rounded-lg text-xs font-black
              {emp.percentBH >= 40 ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'}">
              {emp.percentBH.toFixed(1)}%
            </span>
          </td>
          <td class="px-4 py-3 text-center font-bold text-blue-600">{formatNumber(emp.slSim)}</td>
          <td class="px-4 py-3 text-center font-bold text-orange-600">{formatNumber(emp.slDongHo)}</td>
          <td class="px-4 py-3 text-right font-bold text-purple-600">{formatCurrency(emp.dtPhuKien)}</td>
          <td class="px-4 py-3 text-right font-bold text-amber-600 rounded-r-xl">{formatCurrency(emp.dtGiaDung)}</td>
        </tr>
      {/each}
    </tbody>
  </table>
</div>
